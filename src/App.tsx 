import { useState, useEffect } from 'react'
import { VocabularyQuiz } from './components/VocabularyQuiz'
import { toast, Toaster } from 'sonner'
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'
import { Badge } from '@/components/ui/badge'
import { Button } from '@/components/ui/button'
import { Progress } from '@/components/ui/progress'
import { Accordion, AccordionContent, AccordionItem, AccordionTrigger } from '@/components/ui/accordion'
import { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs'
import {
  CheckCircle2,
  Circle,
  Flag,
  Calendar,
  BookOpen,
  Target,
  Trophy,
  Users,
  Volume2,
  Printer,
  Share2,
  Star,
  Brain
} from 'lucide-react'

interface LearningDay {
  day: number
  title: string
  goal: string
  vocabulary: string[]
  activities: string[]
  completed: boolean
}

const learningPlan: LearningDay[] = [
  {
    day: 1,
    title: "é«˜å°”å¤«åŸºç¡€æœ¯è¯­",
    goal: "æŒæ¡é«˜å°”å¤«çƒåœºåŸºæœ¬æœ¯è¯­å’Œè£…å¤‡åç§°",
    vocabulary: [
      "tee box (å‘çƒå°)", "fairway (çƒé“)", "rough (é•¿è‰åŒº)", "green (æœå²­)",
      "bunker (æ²™å‘)", "golf club (é«˜å°”å¤«çƒæ†)", "driver (ä¸€å·æœ¨æ†)",
      "iron (é“æ†)", "putter (æ¨æ†)", "golf ball (é«˜å°”å¤«çƒ)",
      "par (æ ‡å‡†æ†)", "birdie (å°é¸Ÿçƒ)", "bogey (æŸå¿Œ)", "eagle (è€é¹°çƒ)"
    ],
    activities: [
      "åˆ¶ä½œæœ¯è¯­é—ªå¡ï¼Œæ­£é¢è‹±æ–‡ï¼ŒèƒŒé¢ä¸­æ–‡",
      "è§‚çœ‹ä¸€æ®µé«˜å°”å¤«æ¯”èµ›è§†é¢‘ï¼Œæ³¨æ„è§£è¯´å‘˜ä½¿ç”¨çš„æœ¯è¯­",
      "å¤§å£°æœ—è¯»æ¯ä¸ªæœ¯è¯­5æ¬¡ï¼Œç¡®ä¿å‘éŸ³æ­£ç¡®"
    ],
    completed: false
  },
  {
    day: 2,
    title: "çƒåœºäº¤æµç”¨è¯­",
    goal: "å­¦ä¼šåŸºæœ¬çš„çƒåœºç¤¼ä»ªå’Œäº¤æµè¡¨è¾¾",
    vocabulary: [
      "fore! (å‰æ–¹æ³¨æ„ï¼)", "good shot (å¥½çƒ)", "nice putt (æ¨æ†ä¸é”™)",
      "bad luck (è¿æ°”ä¸å¥½)", "you're away (è½®åˆ°ä½ äº†)", "honor (è£èª‰å¼€çƒæƒ)",
      "play through (è®©è¡Œ)", "ready golf (å‡†å¤‡å¥½å°±æ‰“)", "quiet please (è¯·å®‰é™)",
      "watch the pin (æ³¨æ„æ——æ†)", "mark your ball (æ ‡è®°çƒä½)", "replace your divot (ä¿®å¤è‰çš®)"
    ],
    activities: [
      "ä¸æœ‹å‹æ¨¡æ‹Ÿçƒåœºå¯¹è¯ç»ƒä¹ ",
      "å­¦ä¹ æ ‡å‡†çš„çƒåœºç¤¼ä»ªç”¨è¯­",
      "ç»ƒä¹ é¼“åŠ±å’Œèµç¾çš„è¡¨è¾¾æ–¹å¼"
    ],
    completed: false
  },
  {
    day: 3,
    title: "å‡»çƒæŒ‡ä»¤ä¸åŠ¨ä½œè¯æ±‡",
    goal: "æŒæ¡æè¿°å‡»çƒåŠ¨ä½œå’ŒæŠ€æœ¯çš„ä¸“ä¸šè¯æ±‡",
    vocabulary: [
      "swing (æŒ¥æ†)", "stance (ç«™å§¿)", "grip (æ¡æ†)", "backswing (åæ‘†)",
      "downswing (ä¸‹æŒ¥)", "follow through (éšæŒ¥)", "tempo (èŠ‚å¥)", "balance (å¹³è¡¡)",
      "slice (å³æ›²çƒ)", "hook (å·¦æ›²çƒ)", "fade (å°å³æ›²)", "draw (å°å·¦æ›²)",
      "chip shot (åˆ‡çƒ)", "pitch shot (åŠˆçƒ)", "flop shot (é«˜æŠ›çƒ)"
    ],
    activities: [
      "è§‚çœ‹ä¸“ä¸šæ•™å­¦è§†é¢‘ï¼Œå­¦ä¹ åŠ¨ä½œæè¿°",
      "ç»ƒä¹ ç”¨è‹±è¯­æè¿°è‡ªå·±çš„æŒ¥æ†åŠ¨ä½œ",
      "å­¦ä¹ å¸¸è§çš„æŒ¥æ†é—®é¢˜åŠå…¶è‹±æ–‡è¡¨è¾¾"
    ],
    completed: false
  },
  {
    day: 4,
    title: "çƒåœºå¯¼èˆªä¸æ–¹ä½è¡¨è¾¾",
    goal: "å­¦ä¼šæè¿°çƒåœºä½ç½®å’Œæ–¹å‘çš„è¡¨è¾¾æ–¹å¼",
    vocabulary: [
      "left side (å·¦ä¾§)", "right side (å³ä¾§)", "straight ahead (æ­£å‰æ–¹)",
      "dogleg left/right (å·¦/å³ç‹—è…¿æ´)", "uphill (ä¸Šå¡)", "downhill (ä¸‹å¡)",
      "pin high (ä¸æ——æ†åŒä¸€æ°´å¹³çº¿)", "short of the pin (çƒåœ¨æ´æ¯å‰)",
      "over the green (çƒè¿‡äº†æœå²­)", "in the rough (åœ¨é•¿è‰åŒº)",
      "water hazard (æ°´éšœç¢)", "out of bounds (ç•Œå¤–)"
    ],
    activities: [
      "ä½¿ç”¨çƒåœºåœ°å›¾ç»ƒä¹ æ–¹ä½æè¿°",
      "ç»ƒä¹ ç»™åŒä¼´æŒ‡ç¤ºçƒçš„ä½ç½®",
      "å­¦ä¹ é˜…è¯»çƒåœºå¸ƒå±€å›¾çš„è‹±æ–‡è¯´æ˜"
    ],
    completed: false
  },
  {
    day: 5,
    title: "æ¯”èµ›è§„åˆ™å’Œç¤¼ä»ªç”¨è¯­",
    goal: "äº†è§£é«˜å°”å¤«è§„åˆ™ç›¸å…³çš„è‹±è¯­è¡¨è¾¾",
    vocabulary: [
      "handicap (å·®ç‚¹)", "stroke play (æ¯”æ†èµ›)", "match play (æ¯”æ´èµ›)",
      "penalty stroke (ç½šæ†)", "drop zone (æŠ›çƒåŒº)", "free drop (å…è´¹æŠ›çƒ)",
      "lost ball (é—å¤±çƒ)", "provisional ball (ä¸´æ—¶çƒ)", "unplayable lie (ä¸å¯æ‰“çƒä½)",
      "gimme (è®©æ¨)", "concede (è®¤è¾“)", "all square (å¹³å±€)",
      "dormie (é¢†å…ˆæ´æ•°ç­‰äºå‰©ä½™æ´æ•°)"
    ],
    activities: [
      "å­¦ä¹ åŸºæœ¬è§„åˆ™çš„è‹±æ–‡è¯´æ˜",
      "ç»ƒä¹ è§£é‡Šç®€å•çš„è§„åˆ™æƒ…å†µ",
      "äº†è§£æ¯”èµ›ä¸­å¸¸ç”¨çš„ç¤¼ä»ªè¡¨è¾¾"
    ],
    completed: false
  },
  {
    day: 6,
    title: "ä¸“ä¸šæœ¯è¯­ä¸æŠ€æœ¯è®¨è®º",
    goal: "æŒæ¡æ›´é«˜çº§çš„æŠ€æœ¯è¯æ±‡å’Œä¸“ä¸šè®¨è®º",
    vocabulary: [
      "loft (æ†é¢å€¾è§’)", "lie angle (æ†èº«å€¾è§’)", "shaft flex (æ†èº«ç¡¬åº¦)",
      "compression (å‹ç¼©)", "launch angle (å‘å°„è§’)", "spin rate (æ—‹è½¬é€Ÿåº¦)",
      "carry distance (é£è¡Œè·ç¦»)", "roll distance (æ»šåŠ¨è·ç¦»)",
      "course rating (çƒåœºéš¾åº¦ç³»æ•°)", "slope rating (å¡åº¦ç³»æ•°)",
      "green speed (æœå²­é€Ÿåº¦)", "pin position (æ——æ†ä½ç½®)"
    ],
    activities: [
      "é˜…è¯»è‹±æ–‡çš„è£…å¤‡ä»‹ç»å’ŒæŠ€æœ¯æ–‡ç« ",
      "ç»ƒä¹ è®¨è®ºçƒå…·é€‰æ‹©å’ŒæŠ€æœ¯æ”¹è¿›",
      "å­¦ä¹ åˆ†æçƒåœºæ¡ä»¶çš„ä¸“ä¸šè¡¨è¾¾"
    ],
    completed: false
  },
  {
    day: 7,
    title: "ç»¼åˆåº”ç”¨ä¸å®æˆ˜æ¼”ç»ƒ",
    goal: "ç»¼åˆè¿ç”¨æ‰€å­¦è¯æ±‡è¿›è¡Œå®é™…äº¤æµ",
    vocabulary: [
      "ç»¼åˆå¤ä¹ å‰6å¤©æ‰€æœ‰è¯æ±‡",
      "å¢åŠ æƒ…æ™¯å¯¹è¯ä¸­çš„è¿æ¥è¯å’Œè¿‡æ¸¡è¯­",
      "æŒæ¡å®Œæ•´çš„çƒåœºäº¤æµæµç¨‹"
    ],
    activities: [
      "è¿›è¡Œå®Œæ•´çš„æ¨¡æ‹Ÿé«˜å°”å¤«å¯¹è¯",
      "ç»ƒä¹ ä»‹ç»é«˜å°”å¤«ç»™è‹±è¯­æ¯è¯­è€…",
      "åˆ¶å®šä¸ªäººçš„é«˜å°”å¤«è‹±è¯­å­¦ä¹ è®¡åˆ’",
      "å®Œæˆè¯æ±‡æµ‹è¯•å’Œå£è¯­è¯„ä¼°"
    ],
    completed: false
  }
]

const learningTips = [
  "æ¯å¤©åšæŒå­¦ä¹ 15-30åˆ†é’Ÿï¼Œä¿æŒå­¦ä¹ è¿ç»­æ€§",
  "å¤§å£°æœ—è¯»è¯æ±‡ï¼Œæ³¨æ„æ­£ç¡®çš„å‘éŸ³",
  "ç»“åˆå®é™…æ‰“çƒç»éªŒæ¥ç†è§£å’Œè®°å¿†æœ¯è¯­",
  "è§‚çœ‹è‹±æ–‡è§£è¯´çš„é«˜å°”å¤«æ¯”èµ›è§†é¢‘",
  "æ‰¾æœºä¼šä¸è‹±è¯­æ¯è¯­çš„çƒå‹äº¤æµ",
  "ä½¿ç”¨æ‰‹æœºåº”ç”¨è®°å½•æ–°å­¦çš„è¯æ±‡",
  "åˆ¶ä½œä¸ªäººçš„é«˜å°”å¤«è‹±è¯­è¯æ±‡æœ¬"
]

function App() {
  const [completedDays, setCompletedDays] = useState<number[]>([])
  const [selectedDay, setSelectedDay] = useState(1)
  const [speakingWord, setSpeakingWord] = useState<string | null>(null)
  const [showQuiz, setShowQuiz] = useState(false)

  // ä»æœ¬åœ°å­˜å‚¨åŠ è½½è¿›åº¦
  useEffect(() => {
    const saved = localStorage.getItem('golf-english-progress')
    if (saved) {
      setCompletedDays(JSON.parse(saved))
    }
  }, [])

  // ä¿å­˜è¿›åº¦åˆ°æœ¬åœ°å­˜å‚¨
  useEffect(() => {
    localStorage.setItem('golf-english-progress', JSON.stringify(completedDays))
  }, [completedDays])

  const toggleDayCompletion = (day: number) => {
    setCompletedDays(prev => {
      const isCompleted = prev.includes(day)
      if (isCompleted) {
        toast.info(`ç¬¬${day}å¤©å­¦ä¹ è¿›åº¦å·²å–æ¶ˆæ ‡è®°`)
        return prev.filter(d => d !== day)
      }
      toast.success(`ğŸ‰ æ­å–œå®Œæˆç¬¬${day}å¤©çš„å­¦ä¹ ï¼`, {
        description: `ä½ å·²ç»æŒæ¡äº†${learningPlan[day - 1].vocabulary.length}ä¸ªæ–°è¯æ±‡ï¼`
      })
      return [...prev, day]
    })
  }

  const speak = (text: string) => {
    if ('speechSynthesis' in window) {
      // æå–è‹±æ–‡éƒ¨åˆ†ï¼ˆæ‹¬å·å‰çš„å†…å®¹ï¼‰
      const englishText = text.split('(')[0].trim()
      setSpeakingWord(englishText)

      const utterance = new SpeechSynthesisUtterance(englishText)
      utterance.lang = 'en-US'
      utterance.rate = 0.8
      utterance.onend = () => setSpeakingWord(null)

      speechSynthesis.speak(utterance)
      toast.info(`ğŸ”Š æ­£åœ¨æ’­æ”¾: ${englishText}`)
    } else {
      toast.error('æŠ±æ­‰ï¼Œæ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè¯­éŸ³æ’­æ”¾åŠŸèƒ½')
    }
  }

  const printPage = () => {
    window.print()
  }

  const shareContent = async () => {
    if (navigator.share) {
      try {
        await navigator.share({
          title: '7å¤©æŒæ¡é«˜å°”å¤«è‹±è¯­',
          text: 'ä¸€ä¸ªå®Œæ•´çš„é«˜å°”å¤«è‹±è¯­å­¦ä¹ è®¡åˆ’ï¼Œå¸®ä½ å¿«é€ŸæŒæ¡çƒåœºäº¤æµæŠ€å·§ï¼',
          url: window.location.href,
        })
        toast.success('å†…å®¹åˆ†äº«æˆåŠŸï¼')
      } catch (err) {
        console.log('åˆ†äº«å¤±è´¥:', err)
        toast.error('åˆ†äº«å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•')
      }
    } else {
      // å›é€€åˆ°å¤åˆ¶é“¾æ¥
      try {
        await navigator.clipboard.writeText(window.location.href)
        toast.success('ğŸ”— é“¾æ¥å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼', {
          description: 'ç°åœ¨ä½ å¯ä»¥åˆ†äº«ç»™æœ‹å‹äº†'
        })
      } catch (err) {
        toast.error('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶é“¾æ¥')
      }
    }
  }

  const progressPercentage = (completedDays.length / 7) * 100

  return (
    <div className="min-h-screen bg-gradient-to-b from-green-50 to-green-100">
      {/* é¡¶éƒ¨å¯¼èˆª */}
      <nav className="bg-green-600 text-white p-4 shadow-lg">
        <div className="container mx-auto flex justify-between items-center">
          <div className="flex items-center space-x-2">
            <div className="w-8 h-8 rounded-full bg-white flex items-center justify-center">
              <Flag className="w-5 h-5 text-green-600" />
            </div>
            <h1 className="text-xl font-bold">é«˜å°”å¤«è‹±è¯­å­¦ä¹ </h1>
          </div>
          <div className="flex space-x-2">
            <Button variant="outline" size="sm" onClick={() => setShowQuiz(true)} className="text-green-600">
              <Brain className="w-4 h-4 mr-1" />
              è¯æ±‡æµ‹è¯•
            </Button>
            <Button variant="outline" size="sm" onClick={printPage} className="text-green-600">
              <Printer className="w-4 h-4 mr-1" />
              æ‰“å°
            </Button>
            <Button variant="outline" size="sm" onClick={shareContent} className="text-green-600">
              <Share2 className="w-4 h-4 mr-1" />
              åˆ†äº«
            </Button>
          </div>
        </div>
      </nav>

      <div className="container mx-auto px-4 py-8">
        {/* æ ‡é¢˜åŒºåŸŸ */}
        <div className="text-center mb-12">
          <div className="relative inline-block">
            <div className="w-20 h-20 mx-auto mb-4 rounded-full shadow-lg bg-gradient-to-br from-green-400 to-green-600 flex items-center justify-center">
              <Flag className="w-10 h-10 text-white" />
            </div>
          </div>
          <h1 className="text-4xl md:text-5xl font-bold text-green-800 mb-4">
            7å¤©æŒæ¡é«˜å°”å¤«è‹±è¯­
          </h1>
          <p className="text-xl text-green-600 max-w-2xl mx-auto">
            ä»åŸºç¡€æœ¯è¯­åˆ°åœºä¸Šæµåˆ©äº¤æµçš„å®Œæ•´å­¦ä¹ è®¡åˆ’
          </p>

          {/* è¿›åº¦æ¡ */}
          <div className="mt-8 max-w-md mx-auto">
            <div className="flex justify-between items-center mb-2">
              <span className="text-sm text-green-700">å­¦ä¹ è¿›åº¦</span>
              <span className="text-sm text-green-700">{completedDays.length}/7 å¤©</span>
            </div>
            <Progress value={progressPercentage} className="h-3" />
            <p className="text-xs text-green-600 mt-1">
              å·²å®Œæˆ {progressPercentage.toFixed(0)}% çš„å­¦ä¹ è®¡åˆ’
            </p>
          </div>
        </div>

        {/* ç®€ä»‹éƒ¨åˆ† */}
        <Card className="mb-8 border-green-200">
          <CardHeader className="bg-green-50">
            <CardTitle className="flex items-center text-green-800">
              <Target className="w-5 h-5 mr-2" />
              å­¦ä¹ ç›®æ ‡
            </CardTitle>
          </CardHeader>
          <CardContent className="pt-6">
            <div className="grid md:grid-cols-2 gap-6">
              <div>
                <h3 className="font-semibold text-green-700 mb-3">è¿™ä¸ªè®¡åˆ’å°†å¸®åŠ©ä½ ï¼š</h3>
                <ul className="space-y-2 text-green-600">
                  <li className="flex items-center">
                    <CheckCircle2 className="w-4 h-4 mr-2 text-green-500" />
                    æŒæ¡300+é«˜å°”å¤«ä¸“ä¸šæœ¯è¯­
                  </li>
                  <li className="flex items-center">
                    <CheckCircle2 className="w-4 h-4 mr-2 text-green-500" />
                    å­¦ä¼šçƒåœºåŸºæœ¬äº¤æµç”¨è¯­
                  </li>
                  <li className="flex items-center">
                    <CheckCircle2 className="w-4 h-4 mr-2 text-green-500" />
                    ç†è§£é«˜å°”å¤«è§„åˆ™å’Œç¤¼ä»ªè¡¨è¾¾
                  </li>
                  <li className="flex items-center">
                    <CheckCircle2 className="w-4 h-4 mr-2 text-green-500" />
                    èƒ½å¤Ÿè¿›è¡ŒæŠ€æœ¯è®¨è®ºå’Œäº¤æµ
                  </li>
                </ul>
              </div>
              <div className="relative bg-gradient-to-br from-green-100 to-green-200 rounded-lg p-8 h-48 flex items-center justify-center">
                <div className="text-center">
                  <div className="flex justify-center space-x-4 mb-4">
                    <Trophy className="w-12 h-12 text-green-600" />
                    <Target className="w-12 h-12 text-blue-600" />
                    <BookOpen className="w-12 h-12 text-purple-600" />
                  </div>
                  <p className="text-green-700 font-semibold">å¼€å§‹ä½ çš„é«˜å°”å¤«è‹±è¯­å­¦ä¹ ä¹‹æ—…</p>
                </div>
              </div>
            </div>
          </CardContent>
        </Card>

        {/* æ¯æ—¥å­¦ä¹ è®¡åˆ’ */}
        <div className="mb-8">
          <h2 className="text-3xl font-bold text-green-800 mb-6 flex items-center">
            <Calendar className="w-8 h-8 mr-3" />
            7å¤©å­¦ä¹ è®¡åˆ’
          </h2>

          <Tabs value={selectedDay.toString()} onValueChange={(value) => setSelectedDay(Number.parseInt(value))}>
            <TabsList className="grid w-full grid-cols-7 mb-6">
              {learningPlan.map((day) => (
                <TabsTrigger
                  key={day.day}
                  value={day.day.toString()}
                  className={`relative ${completedDays.includes(day.day) ? 'bg-green-100' : ''}`}
                >
                  ç¬¬{day.day}å¤©
                  {completedDays.includes(day.day) && (
                    <CheckCircle2 className="w-4 h-4 absolute -top-1 -right-1 text-green-500" />
                  )}
                </TabsTrigger>
              ))}
            </TabsList>

            {learningPlan.map((day) => (
              <TabsContent key={day.day} value={day.day.toString()}>
                <Card className="border-green-200 enhanced-shadow animate-fade-in-up">
                  <CardHeader className="bg-gradient-to-r from-green-50 to-emerald-50">
                    <div className="flex items-center justify-between">
                      <div>
                        <CardTitle className="text-2xl text-green-800 flex items-center">
                          <Flag className="w-6 h-6 mr-2" />
                          ç¬¬{day.day}å¤©: {day.title}
                        </CardTitle>
                        <CardDescription className="text-green-600 mt-2">
                          <strong>å­¦ä¹ ç›®æ ‡ï¼š</strong> {day.goal}
                        </CardDescription>
                      </div>
                      <Button
                        onClick={() => toggleDayCompletion(day.day)}
                        variant={completedDays.includes(day.day) ? "default" : "outline"}
                        className={`golf-button ${completedDays.includes(day.day) ? "bg-green-500 hover:bg-green-600" : "border-green-300"}`}
                      >
                        {completedDays.includes(day.day) ? (
                          <CheckCircle2 className="w-4 h-4 mr-1" />
                        ) : (
                          <Circle className="w-4 h-4 mr-1" />
                        )}
                        {completedDays.includes(day.day) ? "å·²å®Œæˆ" : "æ ‡è®°å®Œæˆ"}
                      </Button>
                    </div>
                  </CardHeader>
                  <CardContent className="pt-6">
                    <div className="grid md:grid-cols-2 gap-6">
                      {/* æ ¸å¿ƒè¯æ±‡ */}
                      <div>
                        <h4 className="font-semibold text-green-700 mb-3 flex items-center">
                          <BookOpen className="w-4 h-4 mr-2" />
                          æ ¸å¿ƒè¯æ±‡ ({day.vocabulary.length} ä¸ª)
                        </h4>
                        <div className="space-y-2 max-h-60 overflow-y-auto vocabulary-scroll">
                          {day.vocabulary.map((word, index) => (
                            <div
                              key={`${day.day}-vocab-${index}-${word.slice(0, 10)}`}
                              className="vocabulary-card flex items-center justify-between p-2 bg-green-50 rounded-lg border border-green-100"
                            >
                              <span className="text-green-700">{word}</span>
                              <Button
                                size="sm"
                                variant="ghost"
                                onClick={() => speak(word)}
                                className={`text-green-600 hover:text-green-700 ${speakingWord === word.split('(')[0].trim() ? 'speaking' : ''}`}
                                disabled={speakingWord === word.split('(')[0].trim()}
                              >
                                <Volume2 className="w-4 h-4" />
                              </Button>
                            </div>
                          ))}
                        </div>
                      </div>

                      {/* ç»ƒä¹ æ´»åŠ¨ */}
                      <div>
                        <h4 className="font-semibold text-green-700 mb-3 flex items-center">
                          <Users className="w-4 h-4 mr-2" />
                          å»ºè®®ç»ƒä¹ æ´»åŠ¨
                        </h4>
                        <div className="space-y-3">
                          {day.activities.map((activity, index) => (
                            <div key={`${day.day}-activity-${index}-${activity.slice(0, 10)}`} className="flex items-start p-3 bg-blue-50 rounded-lg border border-blue-100">
                              <div className="flex-shrink-0 w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-bold mr-3 mt-0.5">
                                {index + 1}
                              </div>
                              <span className="text-blue-700">{activity}</span>
                            </div>
                          ))}
                        </div>
                      </div>
                    </div>
                  </CardContent>
                </Card>
              </TabsContent>
            ))}
          </Tabs>
        </div>

        {/* å­¦ä¹ å»ºè®® */}
        <Card className="mb-8 border-blue-200">
          <CardHeader className="bg-blue-50">
            <CardTitle className="text-blue-800 flex items-center">
              <Star className="w-5 h-5 mr-2" />
              å­¦ä¹ å»ºè®®ä¸æŠ€å·§
            </CardTitle>
          </CardHeader>
          <CardContent className="pt-6">
            <div className="grid md:grid-cols-2 gap-6">
              <div>
                <h4 className="font-semibold text-blue-700 mb-3">æœ‰æ•ˆå­¦ä¹ æ–¹æ³•</h4>
                <ul className="space-y-2">
                  {learningTips.map((tip, index) => (
                    <li key={`tip-${index}-${tip.slice(0, 15)}`} className="flex items-start text-blue-600">
                      <div className="flex-shrink-0 w-5 h-5 bg-blue-100 rounded-full flex items-center justify-center mr-3 mt-0.5">
                        <span className="text-blue-600 text-xs font-bold">{index + 1}</span>
                      </div>
                      {tip}
                    </li>
                  ))}
                </ul>
              </div>
              <div className="space-y-4">
                <div className="p-4 bg-yellow-50 rounded-lg border border-yellow-200">
                  <h5 className="font-semibold text-yellow-800 mb-2">ğŸ’¡ è®°å¿†å°è´´å£«</h5>
                  <p className="text-yellow-700 text-sm">
                    å°†æ–°å­¦çš„è‹±è¯­æœ¯è¯­ä¸å®é™…æ‰“çƒç»éªŒç»“åˆï¼Œåœ¨çƒåœºä¸Šä¸»åŠ¨ä½¿ç”¨è¿™äº›è¯æ±‡ï¼Œè¿™æ ·èƒ½å¤§å¤§æé«˜è®°å¿†æ•ˆæœã€‚
                  </p>
                </div>
                <div className="p-4 bg-purple-50 rounded-lg border border-purple-200">
                  <h5 className="font-semibold text-purple-800 mb-2">ğŸ¯ å®æˆ˜åº”ç”¨</h5>
                  <p className="text-purple-700 text-sm">
                    æ‰¾æœºä¼šè§‚çœ‹è‹±æ–‡è§£è¯´çš„é«˜å°”å¤«æ¯”èµ›ï¼Œæˆ–è€…åŠ å…¥è‹±è¯­é«˜å°”å¤«ç¤¾ç¾¤ï¼Œåœ¨çœŸå®ç¯å¢ƒä¸­ç»ƒä¹ æ‰€å­¦è¯æ±‡ã€‚
                  </p>
                </div>
                <div className="p-4 bg-green-50 rounded-lg border border-green-200">
                  <h5 className="font-semibold text-green-800 mb-2">ğŸ§  æµ‹è¯•ä½ çš„å­¦ä¹ æˆæœ</h5>
                  <p className="text-green-700 text-sm mb-3">
                    é€šè¿‡è¯æ±‡æµ‹è¯•æ£€éªŒå­¦ä¹ æ•ˆæœï¼Œå·©å›ºè®°å¿†ã€‚
                  </p>
                  <Button
                    onClick={() => setShowQuiz(true)}
                    className="w-full bg-green-600 hover:bg-green-700 golf-button"
                  >
                    <Brain className="w-4 h-4 mr-2" />
                    å¼€å§‹è¯æ±‡æµ‹è¯•
                  </Button>
                </div>
              </div>
            </div>
          </CardContent>
        </Card>

        {/* æˆå°±å±•ç¤º */}
        {completedDays.length > 0 && (
          <Card className="mb-8 border-yellow-200">
            <CardHeader className="bg-yellow-50">
              <CardTitle className="text-yellow-800 flex items-center">
                <Trophy className="w-5 h-5 mr-2" />
                å­¦ä¹ æˆå°±
              </CardTitle>
            </CardHeader>
            <CardContent className="pt-6">
              <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                <div className="text-center p-4 bg-green-50 rounded-lg">
                  <div className="text-2xl font-bold text-green-600">{completedDays.length}</div>
                  <div className="text-sm text-green-600">å®Œæˆå¤©æ•°</div>
                </div>
                <div className="text-center p-4 bg-blue-50 rounded-lg">
                  <div className="text-2xl font-bold text-blue-600">
                    {completedDays.reduce((acc, day) => acc + learningPlan[day - 1].vocabulary.length, 0)}
                  </div>
                  <div className="text-sm text-blue-600">æŒæ¡è¯æ±‡</div>
                </div>
                <div className="text-center p-4 bg-purple-50 rounded-lg">
                  <div className="text-2xl font-bold text-purple-600">
                    {Math.round(progressPercentage)}%
                  </div>
                  <div className="text-sm text-purple-600">å®Œæˆè¿›åº¦</div>
                </div>
                <div className="text-center p-4 bg-orange-50 rounded-lg">
                  <div className="text-2xl font-bold text-orange-600">
                    {completedDays.length >= 7 ? "ğŸ†" : completedDays.length >= 5 ? "ğŸ¥‡" : completedDays.length >= 3 ? "ğŸ¥ˆ" : "ğŸ¥‰"}
                  </div>
                  <div className="text-sm text-orange-600">å­¦ä¹ å¾½ç« </div>
                </div>
              </div>
            </CardContent>
          </Card>
        )}

        {/* é¡µè„š */}
        <footer className="text-center py-8 border-t border-green-200 mt-12">
          <div className="text-green-600 mb-4">
            <p className="text-lg font-semibold">ç¥ä½ åœ¨é«˜å°”å¤«è‹±è¯­å­¦ä¹ ä¹‹è·¯ä¸Šå–å¾—æˆåŠŸï¼</p>
            <p className="text-sm mt-2">
              åšæŒæ¯å¤©å­¦ä¹ ï¼Œå¾ˆå¿«ä½ å°±èƒ½åœ¨çƒåœºä¸Šè‡ªä¿¡åœ°ç”¨è‹±è¯­äº¤æµäº†ã€‚
            </p>
          </div>
          <div className="text-xs text-green-500">
            Â© 2025 é«˜å°”å¤«è‹±è¯­å­¦ä¹ è®¡åˆ’ | ä¸ºé«˜å°”å¤«çˆ±å¥½è€…é‡èº«å®šåˆ¶
          </div>
        </footer>
      </div>

      {/* è¯æ±‡æµ‹è¯•å¼¹çª— */}
      <VocabularyQuiz
        isOpen={showQuiz}
        onClose={() => setShowQuiz(false)}
      />

      {/* Toast é€šçŸ¥ */}
      <Toaster
        position="top-right"
        toastOptions={{
          style: {
            background: '#f0fdf4',
            border: '1px solid #bbf7d0',
            color: '#15803d',
          },
        }}
      />
    </div>
  )
}

export default App
